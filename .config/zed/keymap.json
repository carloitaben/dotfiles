// Zed keymap
//
// For information on binding keys, see the Zed
// documentation: https://zed.dev/docs/key-bindings
//
// To see the default key bindings run `zed: open default keymap`
// from the command palette.
[
  {
    "context": "Workspace",
    "bindings": {
      "cmd-j": "workspace::ToggleRightDock",
      "cmd-r": "editor::RestartLanguageServer",
    },
  },
  {
    "context": "Editor",
    "bindings": {
      "cmd-/": ["editor::ToggleComments", { "advance_downwards": false }],
    },
  },
  {
    "context": "Workspace || Editor || Terminal",
    "bindings": {
      "cmd-?": [
        "task::Spawn",
        { "task_name": "opencode", "reveal_target": "center" },
      ],
      "cmd-shift-j": "workspace::NewCenterTerminal",
      "cmd-shift-g": [
        "task::Spawn",
        { "task_name": "lazygit", "reveal_target": "center" },
      ],
    },
  },
  {
    "context": "Editor",
    "bindings": {
      "cmd-/": ["editor::ToggleComments", { "advance_downwards": false }],
    },
  },
  {
    "context": "vim_operator == a || vim_operator == i || vim_operator == cs",
    "bindings": {
      "q": "vim::MiniQuotes",
      "b": "vim::MiniBrackets",
    },
  },
  {
    "context": "Dock",
    "bindings": {
      "ctrl-w k": "workspace::ActivatePaneUp",
      "ctrl-w j": "workspace::ActivatePaneDown",
      "ctrl-w h": "workspace::ActivatePaneLeft",
      "ctrl-w l": "workspace::ActivatePaneRight",
    },
  },
  {
    "context": "VimControl && !menu",
    "bindings": {
      "g k": ["editor::AddSelectionAbove", { "skip_soft_wrap": false }],
      "g j": ["editor::AddSelectionBelow", { "skip_soft_wrap": false }],
      "g o": ["workspace::SendKeystrokes", "g g 0"],
      "J": "vim::WindowBottom",
      "K": "vim::WindowTop",
      "H": "pane::ActivatePreviousItem",
      "L": "pane::ActivateNextItem",
      "space f": "editor::Format",
    },
  },
  {
    "context": "Terminal",
    "bindings": {
      "ctrl-w v": "pane::SplitVertical",
      "ctrl-w s": "pane::SplitHorizontal",
      "ctrl-w c": ["pane::CloseActiveItem", { "close_pinned": false }],
    },
  },
  {
    "context": "vim_mode == visual",
    "bindings": {
      ">": ["action::Sequence", ["vim::Indent", "vim::RestoreVisualSelection"]],
      "<": [
        "action::Sequence",
        ["vim::Outdent", "vim::RestoreVisualSelection"],
      ],
      "=": [
        "action::Sequence",
        ["vim::AutoIndent", "vim::RestoreVisualSelection"],
      ],
      "K": "editor::MoveLineUp",
      "J": "editor::MoveLineDown",
    },
  },
]
